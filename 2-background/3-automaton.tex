%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                 Automata Theory
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Automata Theory }

Throughout this section we present concepts of Automata Theory, using the definitions introduced by Vardi restricted to the finite case \cite{vardi97a}. The notions of infinite words and trees leading to the standard alternating automata over infinite words are discussed at the end of the chapter as well as the reasoning behind the adaptation of such concepts into the definitions presented in this thesis. 

%%%%%%%%%%%%%%%%%  Words and Trees %%%%%%%%%%%%
\subsubsection{Words and Trees}

First, we define an \emph{alphabet} as a finite non-empty set of symbols $\Sigma$. Given an alphabet $\Sigma$, we can generate a \emph{finite word} $w\in\Sigma^*$ as a sequence $a_0,\cdots , a_n$ of characters in the alphabet. We refer to the character at position $i$ of a word $w$ by $w[i]$.


A finite \emph{tree} $T$ is a connected directed graph defined by a pair $(N,E)$ where $N$ is a set of nodes and $E \subseteq N\times N$ is a set of edges. A tree has a single root node $\epsilon$ and every non-root node has a unique parent; node $n_p$ is a parent of $n_c$ and $n_c$ is a child of $n_p$ if there is an edge from $n_p$ to $n_c$, formally expressed as $(n_p,n_c)\in E$. Nodes without any children are called leafs and the level of a node $level(n)$ is the number of edges from $\epsilon$ to $n$. 

\begin{definition}[$\Sigma$-labeled tree]    
    A \emph{$\Sigma$-labeled tree} is a pair $(T,M)$ where $T=(N,E)$ is a tree and $M$ is a mapping $M: N \to \Sigma$, assigning a label to every node in the tree. 
\end{definition}

A finite \emph{branch} $n_0,\cdots,n_k$ is a sequence of nodes of a tree $T$, such that $n_0=\epsilon$, $n_k$ is a leaf node and $n_{i+1}$ is a child of $n_i$ for $0\leq i < k$.

%%%%%%%%%%%%%%%%%  Automata %%%%%%%%%%%%

\subsubsection{Deterministic and Nondeterministic Automata}


\begin{definition}[Deterministic Finite Automaton]
A Deterministic Finite Automaton (DFA) is a tuple $(\Sigma,S,s^0,\delta,F)$, where $\Sigma$ is a finite nonempty alphabet, $S$ is a finite nonempty set of states, $s^0$ is the initial state, $\delta : \Sigma \times S \to S$ is a transition function, and $F$ a set of accepting states. 
\end{definition}

Deterministic automata have a unique successor state when a symbol $a\in\Sigma$ is read in a state $s\in S$. This behavior can be described as universal since this path must always be taken when the respective symbol is encountered. To add nondeterminism and allow a choice for the next state, we can use a Nondeterministic Finite Automaton where the codomain of the transition is a set of possible successor states. Nondeterminism gives the power of existential choice among all these potential successor states. 

\begin{definition}[Nondeterministic Finite Automaton]
A Nondeterministic Finite Automaton (NFA) is a tuple $(\Sigma,S,S^0,\delta,F)$, where $\Sigma$ is a finite nonempty alphabet, $S$ is a finite nonempty set of states, $S^0$ is a set of initial states, $\delta : \Sigma \times S \to 2^S$ is a transition function, and $F$ a set of accepting states. 
\end{definition}

%----------- Example NFA --------------%
\begin{example}[NFA]
    An NFA $(\{a\},\{s_0,s_1,s_2,s_3\},\{s_0\},\delta,\{s_3\})$ where $\delta(s_0,a)=\{s_1,s_2,s_3\}$  and $\delta(s_i,a)=\emptyset$ for $1\leq i\leq 3$

    \input{diagrams/nfa.tex}
\end{example}

\subsubsection{Alternating Automata over Finite Words}

%%%%%%%%%%%  Alternating Automata %%%%%%%%%%%%

Alternating automata, in contrast to DFA and NFA, have the capacity to behave in both a universal and an existential manner. For this formalization, we need to consider the following definitions used to increase the expressivity of the transition function.

The set of \emph{positive Boolean formulas} (\pbf) $B^+(X)$ over a set $X$, are the Boolean formulas built from elements of $X$, conjunction $\wedge$, disjunction $\wedge$, $\tpbf$ and $\bm{\mathit{false}}$. Satisfaction is defined as in propositional logic, where $Y\subseteq X$ satisfies $\theta\in B^+(X)$ if assigning true to members of $Y$ and false to $Y\backslash X$ satisfies $\theta$.

\begin{definition}[Alternating Automaton over Finite Words]
    An Alternating Finite Automaton over Finite Words (\AFW) is a tuple $(\Sigma,S,s^0,\delta,F)$, where $\Sigma$ is a finite nonempty alphabet, $S$ is a finite nonempty set of states, $s^0$ is the initial state, $\delta : \Sigma \times S \to B^+(S)$ is a transition function, and $F$ is the set of accepting states.
\end{definition}

%----------- Example AFW --------------%

\begin{example}[\AFW]
    An \AFW $(\{a\},\{s_0,s_1,s_2,s_3\},s_0,\delta,\emptyset)$ where $\delta$ is defined as follows: 
    \begin{multicols*}{2}
        \begin{itemize}
            \item $\delta(s_0,a)=(s_1 \vee s_2) \wedge s_3$
            \item $\delta(s_1,a)=\bm{\mathit{false}}$
            \item $\delta(s_2,a)=\tpbf$
            \item $\delta(s_3,a)=\tpbf$
        \end{itemize}
    \end{multicols*}
    \input{diagrams/afwf.tex}
\end{example}


\begin{definition}[Run]
    A run of an $\AFW$ on a finite word $w$ is a finite $S-$labeled tree $(T,r)$ with $T=(N,V)$, where $r(\epsilon)=s_0$ and for all $n\in N$, if $r(n) = s$ and $\theta = \delta(s,w[\mathit{level}(n)])$, then $\{r(n') \mid (n,n') \in E\}$ satisfies $\theta$.
\end{definition}


Unlike runs for DFA and NFA, which are sequences of states, the runs in an $\AFW \;$ are represented by trees. The universal behavior of this type of automata is expressed by generating multiple branches of the tree when the connective $\wedge$ is encountered. Whereas the existential part is addressed by generating multiple runs, one per each set modeling the positive Boolean formula $\theta$. Each new run is created by launching a copy of the current tree and adding the new children to the leaf nodes based on the transition function when the connective $\wedge$ is reached. 

Another important thing to notice is the role of the Boolean constants $\tpbf$ and $\bm{\mathit{false}}$. The formula $\theta=\tpbf$ is satisfied by the empty set, thus, when $\delta(n,w[i])=\tpbf$, node $n$ does not have any children and becomes a finite branch. We also refer to this situation as ``hitting the true transition". In the case of $\theta=\bm{\mathit{false}}$, the formula can not be satisfied, therefore runs considering this transition are automatically invalidated. 

\begin{definition}[Acceptance condition \cite{giavar13a}]
    A run $R$ of an $\AFW$, represented by the $S$-labeled tree $(T,r)$, is accepted iff all branches of $T$ hit the true transition. 
\end{definition}

\begin{definition}[Acceptance]
    A finite word $w\in\Sigma^*$ is accepted by an \AFW, if there is an accepting run $R$ on $w$.
\end{definition}

\begin{definition}[Language]
    The language recognized by an $\AFW$ $A$ is defined as $L(A)=\{w \in \Sigma^* \mid A$ accepts $w\}$
\end{definition}

This definition of Alternating Automaton over Finite Words is an adaptation of the standard concept of an Alternating B端chi Word Automaton. This automaton is defined over infinite words, thus generating possibly-infinite trees and branches. This type of Alternating Automaton follows the B端chi acceptance condition \cite{buchi90a}, stating that an Alternating B端chi Word Automaton accepts the runs where every infinite branch includes infinitely often nodes with a label from an accepting state.


When working only with finite trees, all finite branches can either hit the true transition, thus becoming certainly finite, or end in a node which could potentially continue being expanded. Hence we can conclude, based on the B端chi condition, that the only requirement is for all branches to become unquestionably finite by hitting the true transition. Moreover, this observation allows us to consider an empty set of final states as they are not longer needed in the acceptance condition. These are the key conclusions assumed by De Giacomo and Vardi \cite{giavar15a} in the adaptation for our definition of \AFW.


%----------- Example Runs AFW --------------%

\begin{example}[Runs of an \AFW]
    Given the \AFW from Example 2 and the finite word $w=aa$, we obtain three runs $R_1$, $R_2$ and $R_3$ corresponding to the sets that satisfy formula $(s_1 \vee s_2) \wedge s_3$, namely $\{s_3,s_2\}$,$\{s_3,s_1\}$ and $\{s_3,s_1,s_2\}$. 
    Each of these sets creates a run when the first character $a$ is read in state $s_0$. In the second time step, all nodes labeled with states $s_3$ and $s_2$ hit the true transition (have no children). All runs with with state $s_1$ at level 1 become invalidated (marked in red), since $w[1]=a$ and $\delta(s_1,a)=\fpbf$. Only run $R_1$ is accepted by having all branches hitting the true transition. Since one run is accepted, the word $w$ is accepted by the automaton. 

    \input{diagrams/run_afw.tex}
\end{example}